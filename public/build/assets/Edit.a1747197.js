import{L as O}from"./Layout.cd4957e3.js";import{g as j}from"./debounce.91c4d28d.js";import{T as E}from"./TextInput.9b0b3eea.js";import{d as z}from"./DeleteMixin.5d42e9e1.js";import{C as G}from"./CheckboxInput.de8f6547.js";import{L as H}from"./LoadingButton.df0f61cd.js";import{T as J}from"./TextareaInput.b3edac7f.js";import{T as K}from"./TrashedMessage.904093cf.js";import{D as P}from"./DeleteRestoreComponent.8fa0eedf.js";import{_ as Q,r as n,o as p,c as m,a as l,b as i,e as c,h as f,t,f as $,d as h,w as W,n as q,F as X,j as Y}from"./app.576bfb6d.js";import"./Dropdown.33fb11be.js";import"./FlashMessages.f9709e01.js";import"./InputError.ce2fc15d.js";import"./Dialog.e26fd9fa.js";import"./Modal.df3141f0.js";const Z={layout:O,remember:"form",props:{field:Object,iservices:Array},mixins:[z("measurement_field","field")],components:{CheckboxInput:G,LoadingButton:H,TextInput:E,TextareaInput:J,TrashedMessage:K,DeleteRestoreComponent:P},metaInfo(){return{title:this.$t("edit_x",{x:this.form.name})}},data(){return{form:{name:this.field.name,type:this.field.type,order:this.field.order,options:this.field.options,services:this.field.services,description:this.field.description,required:this.field.required==1},services:[],restore:!1,sending:!1,types:["Text","Select","Textarea","Checkbox","Radio"]}},mounted(){this.services=this.iservices},methods:{submit(){this.sending=!0;let e={...this.form,options:[...this.form.options],services:this.form.services.map(r=>r.value)};e.options[e.options.length-1].value||e.options.pop(),this.$inertia.put(this.route("measurement_fields.update",this.field.id),e,{onFinish:()=>this.sending=!1})},checkOptions(e){const r=this.form.options.length;e==r&&this.form.options.push({value:""})},selectAllServices(){this.form.services=[],this.services.map(e=>{this.form.services.push(e)}),this.$refs.desc.focus()},deselectAllServices(){this.form.services=[],this.$refs.desc.focus()},searchServices(e,r){e&&(r(!0),this.searchingServices(r,e,this))},searchingServices:j((e,r,d)=>{fetch(d.route("ajax.services")+"?search="+escape(r)).then(b=>{b.json().then(s=>d.services=s),e(!1)})},350)}},ee={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},re=l("span",{class:"text-gray-400 font-medium mx-2"},"/",-1),se={class:"bg-white rounded shadow overflow-hidden max-w-3xl"},oe={class:"p-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},te={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},le={class:"form-label",for:"type"},ie={key:0,class:"form-error"},ne={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},pe={class:"form-label",for:"services"},ae={key:0,class:"form-error"},me={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center"};function de(e,r,d,b,s,a){var y,k,V,_,w,S,C,x,T,F,M;const D=n("Icons"),L=n("Link"),R=n("trashed-message"),v=n("text-input"),g=n("v-select"),I=n("textarea-input"),A=n("checkbox-input"),B=n("DeleteRestoreComponent"),N=n("loading-button");return p(),m("div",null,[l("h1",ee,[i(L,{class:"text-gray-600 hover:text-gray-800 inline-flex items-center",href:e.route("measurement_fields")},{default:c(()=>[i(D,{name:"back",class:"flex-shrink-0 w-3 h-3 md:w-5 md:h-5 fill-current ltr:mr-2 rtl:ml-2 rtl:rotate"}),f(" "+t(e.$tc("Measurement Field",2)),1)]),_:1},8,["href"]),re,f(" "+t(s.form.name),1)]),d.field.deleted_at?(p(),$(R,{key:0,class:"mb-6",onRestore:r[0]||(r[0]=()=>s.restore=!0)},{default:c(()=>[l("span",null,t(e.$t("already_deleted_x",{x:e.$tc("Measurement Field")})),1)]),_:1})):h("",!0),l("div",se,[l("form",{onSubmit:r[10]||(r[10]=W((...o)=>a.submit&&a.submit(...o),["prevent"])),autocomplete:"off"},[l("div",oe,[i(v,{modelValue:s.form.name,"onUpdate:modelValue":r[1]||(r[1]=o=>s.form.name=o),errors:(y=e.$page.props.errors)==null?void 0:y.name,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2",label:e.$t("Name")},null,8,["modelValue","errors","label"]),i(v,{type:"number",modelValue:s.form.order,"onUpdate:modelValue":r[2]||(r[2]=o=>s.form.order=o),label:e.$tc("Order"),errors:(k=e.$page.props.errors)==null?void 0:k.order,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["modelValue","label","errors"]),l("div",te,[l("label",le,t(e.$tc("Type")),1),i(g,{transition:"","input-id":"type",options:s.types,filterable:!1,searchable:!1,modelValue:s.form.type,"onUpdate:modelValue":r[3]||(r[3]=o=>s.form.type=o),dir:e.$page.props.user.account.direction,placeholder:e.$t("select_x",{x:e.$t("Type")}),class:q({error:((V=e.$page.props.errors)==null?void 0:V.type)&&((_=e.$page.props.errors)==null?void 0:_.type.length)})},null,8,["options","modelValue","dir","placeholder","class"]),(w=e.$page.props.errors)!=null&&w.type?(p(),m("div",ie,t((S=e.$page.props.errors)==null?void 0:S.type[0]),1)):h("",!0)]),s.form.type=="Select"||s.form.type=="Radio"||s.form.type=="Checkbox"?(p(!0),m(X,{key:0},Y(s.form.options,(o,u)=>(p(),$(v,{key:"opt_"+u,modelValue:o.value,"onUpdate:modelValue":U=>o.value=U,onFocus:U=>a.checkOptions(u+1),label:"Option "+(u+1),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full",errors:e.$page.props.errors["options."+u+".value"]},null,8,["modelValue","onUpdate:modelValue","onFocus","label","errors"]))),128)):h("",!0),l("div",ne,[l("label",pe,t(e.$tc("Service")),1),i(g,{multiple:"",transition:"",options:s.services,"input-id":"services",modelValue:s.form.services,"onUpdate:modelValue":r[6]||(r[6]=o=>s.form.services=o),onSearch:a.searchServices,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Service",2)}),class:q({error:((C=e.$page.props.errors)==null?void 0:C.services)&&((x=e.$page.props.errors)==null?void 0:x.services.length)})},{"list-footer":c(()=>[s.services.length==s.form.services.length?(p(),m("li",{key:0,role:"option",onClick:r[4]||(r[4]=o=>a.deselectAllServices()),class:"vs__dropdown-option bg-gray-300 hover:bg-gray-400"},t(e.$t("Deselect all above")),1)):(p(),m("li",{key:1,role:"option",onClick:r[5]||(r[5]=o=>a.selectAllServices()),class:"vs__dropdown-option bg-gray-300 hover:bg-gray-400"},t(e.$t("Select all above")),1))]),_:1},8,["options","modelValue","onSearch","dir","placeholder","class"]),(T=e.$page.props.errors)!=null&&T.services?(p(),m("div",ae,t((F=e.$page.props.errors)==null?void 0:F.services[0]),1)):h("",!0)]),i(I,{label:e.$t("Description"),modelValue:s.form.description,"onUpdate:modelValue":r[7]||(r[7]=o=>s.form.description=o),class:"ltr:pr-6 rtl:pl-6 pb-8 w-full",errors:(M=e.$page.props.errors)==null?void 0:M.description},null,8,["label","modelValue","errors"]),f(" "+t(s.form.required)+" ",1),i(A,{class:"mb-8",id:"required",checked:s.form.required,"onUpdate:checked":r[8]||(r[8]=o=>s.form.required=o),label:e.$t("This field is required")},null,8,["checked","label"])]),l("div",me,[i(B,{restore:s.restore,data:d.field,model:"Measurement Field",routeM:"measurement_fields",onCloseRestore:r[9]||(r[9]=()=>s.restore=!1)},null,8,["restore","data"]),i(N,{type:"submit",loading:s.sending,class:"btn-gray ltr:ml-auto rtl:mr-auto"},{default:c(()=>[f(t(e.$t("update_x",{x:e.$tc("Measurement Field")})),1)]),_:1},8,["loading"])])],32)])])}const Te=Q(Z,[["render",de]]);export{Te as default};
