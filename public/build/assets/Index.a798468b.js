import{p as M}from"./pickBy.e10fcc92.js";import{t as P}from"./throttle.6440e6d1.js";import{S as $,m as q}from"./SearchFilter.aee7475c.js";import{L as T}from"./Layout.552d4a0a.js";import{M as S}from"./Modal.5ea56083.js";import j from"./Show.e8443c54.js";import{T as O}from"./TextInput.a9140c34.js";import{P as F}from"./Pagination.c4ae5648.js";import L from"./Form.09a3cc0e.js";import{_ as U,r as d,o as a,c as i,a as s,t as o,b as r,e as h,F as I,j as N,d as m,n as R,h as f,f as y,w as B}from"./app.beedf8fa.js";import"./debounce.59045531.js";import"./Dropdown.9c297445.js";import"./FlashMessages.01bf9828.js";import"./Dialog.a0ead295.js";import"./LoadingButton.b23816ca.js";import"./SmsDialog.696997f4.js";import"./TextareaInput.2286e672.js";import"./InputError.a8df13b4.js";import"./Show.ce6d10e1.js";import"./CheckboxInput.b20b031f.js";const D={layout:T,props:{orders:Object,filters:Object},components:{Show:j,Modal:S,Pagination:F,SearchFilter:$,TextInput:O,PaymentForm:L},data(){return{order:null,viewModal:!1,add_payment:!1,payment_request:null,form:{search:this.filters.search,trashed:this.filters.trashed}}},watch:{form:{handler:P(function(){let e=M(this.form);this.$inertia.replace(this.route("orders",Object.keys(e).length?e:{remember:"forget"}))},250),deep:!0}},methods:{rowClicked(e){fetch(this.route("orders.ajax",e)).then(n=>{n.json().then(u=>{this.order=u,this.viewModal=!0})})},reset(){this.form=q(this.form,()=>null)},PriorityCol(e){if(e==1)return'<span class="bg-gray-200 rounded text-sm py-1 px-2">'+this.$t("Normal")+"</span>";if(e==2)return'<span class="bg-orange-200 rounded text-sm py-1 px-2">'+this.$t("High")+"</span>";if(e==3)return'<span class="bg-red-200 rounded text-sm py-1 px-2">'+this.$t("Urgent")+"</span>"},addPayment(e){this.payment_request||(this.payment_request={}),this.payment_request.customer={value:e.customer.id,label:e.customer.name},this.payment_request.order=e,this.add_payment=!0}}},H={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},A={class:"np mb-6 flex justify-between items-center"},E={class:"block text-gray-700"},z={class:"mt-4 block text-gray-700"},G={class:"mt-4 block text-gray-700"},W={class:"mt-4 block text-gray-700"},J={class:"mt-4 block text-gray-700"},K={class:"inline md:hidden"},Q={class:"hidden md:inline"},X={class:"bg-white rounded shadow overflow-x-auto scroll-on-light overflow-y-hidden"},Y={class:"w-full whitespace-no-wrap"},Z={class:"text-left font-bold"},ee={class:"px-6 pt-6 pb-4"},te={class:"px-6 pt-6 pb-4"},se={class:"px-6 pt-6 pb-4"},oe={class:"px-6 pt-6 pb-4"},le={class:"px-6 pt-6 pb-4",colspan:"2"},ne=["onClick"],re={class:"border-t px-6 py-4 leading-normal"},ae={class:"flex items-center"},ie={key:0},de={class:"border-t px-6 py-4 leading-normal"},me={key:0},ue={class:"border-t px-6 py-4 leading-normal"},pe={key:0},ce={class:"border-t px-6 py-4 text-center"},he=["innerHTML"],_e={key:1,class:"pt-3"},fe={class:"border-t text-right font-bold pl-6 py-4"},ye={class:"inline-flex items-center justify-end"},be=["onClick"],ve={class:"border-t px-4 w-6"},we={class:"flex items-center"},ge={key:0},ke={class:"border-t px-6 py-4",colspan:"6"};function xe(e,n,u,Ve,l,c){const _=d("v-select"),b=d("text-input"),w=d("search-filter"),p=d("Icons"),g=d("Link"),k=d("pagination"),x=d("Show"),v=d("Modal"),V=d("PaymentForm");return a(),i("div",null,[s("div",null,[s("h1",H,o(e.$tc("Order",2)),1),s("div",A,[r(w,{modelValue:l.form.search,"onUpdate:modelValue":n[5]||(n[5]=t=>l.form.search=t),class:"w-full max-w-md ltr:mr-4 rtl:ml-4",onReset:c.reset},{default:h(()=>[s("label",E,o(e.$t("Status")),1),r(_,{modelValue:l.form.status,"onUpdate:modelValue":n[0]||(n[0]=t=>l.form.status=t),options:[e.$t("Received"),e.$t("Preparing"),e.$t("Ready"),e.$t("Completed")]},null,8,["modelValue","options"]),s("label",z,o(e.$t("Start Date")),1),r(b,{type:"date",modelValue:l.form.start_date,"onUpdate:modelValue":n[1]||(n[1]=t=>l.form.start_date=t),pattern:"\\d{4}-\\d{2}-\\d{2}",class:"mt-1 w-full"},null,8,["modelValue"]),s("label",G,o(e.$t("End Date")),1),r(b,{type:"date",modelValue:l.form.end_date,"onUpdate:modelValue":n[2]||(n[2]=t=>l.form.end_date=t),pattern:"\\d{4}-\\d{2}-\\d{2}",class:"mt-1 w-full"},null,8,["modelValue"]),s("label",W,o(e.$tc("Delivery",2)),1),r(_,{modelValue:l.form.due_in,"onUpdate:modelValue":n[3]||(n[3]=t=>l.form.due_in=t),options:[{value:"",label:e.$t("All")},{value:"2",label:e.$t("due_in_x",{x:2})},{value:"7",label:e.$t("due_in_x",{x:7})},{value:"14",label:e.$t("due_in_x",{x:14})}],reduce:t=>t.value},null,8,["modelValue","options","reduce"]),s("label",J,o(e.$t("Trashed")),1),r(_,{modelValue:l.form.trashed,"onUpdate:modelValue":n[4]||(n[4]=t=>l.form.trashed=t),options:[{value:"",label:"Not Trashed"},{value:"with",label:e.$t("With Trashed")},{value:"only",label:e.$t("Only Trashed")}],reduce:t=>t.value},null,8,["modelValue","options","reduce"])]),_:1},8,["modelValue","onReset"]),r(g,{class:"btn-gray",href:e.route("orders.new")},{default:h(()=>[s("span",K,[r(p,{name:"add",class:"w-4 h-4 text-white fill-white group-hover:text-white fill-white"})]),s("span",Q,o(e.$t("create_x",{x:e.$tc("Order")})),1)]),_:1},8,["href"])]),s("div",X,[s("table",Y,[s("thead",null,[s("tr",Z,[s("th",ee,o(e.$tc("Order")),1),s("th",te,o(e.$tc("Customer")),1),s("th",se,o(e.$t("Assigned to & delivery")),1),s("th",oe,o(e.$t("Status")),1),s("th",le,o(e.$t("Grand Total")),1)])]),s("tbody",null,[(a(!0),i(I,null,N(u.orders.data,t=>(a(),i("tr",{key:t.id,onClick:C=>c.rowClicked(t.id),class:R(["cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200",{"bg-red-300":t.status!="Ready"&&t.status!="Completed"&&t.due_passed}])},[s("td",re,[s("div",ae,[f(o(e.$datetime(t.created_at))+" ",1),t.deleted_at?(a(),y(p,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):m("",!0)]),s("div",null,o(e.$t("Ref"))+": "+o(e.$reference(t.reference)),1),t.user?(a(),i("div",ie,o(e.$t("by"))+" "+o(t.user.name),1)):m("",!0)]),s("td",de,[t.customer?(a(),i("div",me,[f(o(t.customer.name)+" ",1),s("div",null,o(t.customer.phone),1)])):m("",!0)]),s("td",ue,[t.assigned_to?(a(),i("div",pe,o(t.assigned_to.name),1)):m("",!0),s("div",null,o(e.$date(t.delivery_date)),1)]),s("td",ce,[s("div",null,o(e.$t(t.status)),1),t.priority?(a(),i("div",{key:0,class:"pt-3",innerHTML:c.PriorityCol(t.priority)},null,8,he)):m("",!0),t.due?(a(),i("div",_e,o(t.due),1)):m("",!0)]),s("td",fe,[s("div",ye,[t.paid?(a(),y(p,{key:0,name:"check",class:"flex-shrink-0 w-3 h-3 fill-green-600 ltr:mr-2 rtl:ml-2"})):(a(),i("a",{key:1,onClick:B(C=>c.addPayment(t),["stop"]),class:"p-1 text-green-700"},[r(p,{name:"add",class:"flex-shrink-0 w-3 h-3 fill-current ml-2"})],8,be)),f(" "+o(e.$number(t.grand_total)),1)])]),s("td",ve,[s("div",we,[r(p,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])])],10,ne))),128)),u.orders.data.length===0?(a(),i("tr",ge,[s("td",ke,o(e.$t("no_x_found",{x:e.$tc("Order")})),1)])):m("",!0)])])]),r(k,{links:u.orders.links,meta:u.orders.meta},null,8,["links","meta"])]),r(v,{show:l.viewModal,"max-width":"2xl",closeable:!0,onClose:n[7]||(n[7]=()=>l.viewModal=!1)},{default:h(()=>[r(x,{order:l.order,onClose:n[6]||(n[6]=()=>l.viewModal=!1)},null,8,["order"])]),_:1},8,["show"]),r(v,{show:l.add_payment,"max-width":"2xl",closeable:!0,onClose:n[9]||(n[9]=()=>l.add_payment=!1)},{default:h(()=>[l.payment_request?(a(),y(V,{key:0,modal:!0,c:l.payment_request.customer,oId:l.payment_request.order.id,amount:l.payment_request.order.grand_total,onClose:n[8]||(n[8]=()=>l.add_payment=!1)},null,8,["c","oId","amount"])):m("",!0)]),_:1},8,["show"])])}const ze=U(D,[["render",xe]]);export{ze as default};
