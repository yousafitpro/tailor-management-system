import{L as z}from"./Layout.71b65a2f.js";import{g as F}from"./debounce.fdd79989.js";import{L as Y}from"./LoadingButton.a1308640.js";import{_ as x,r as G,o,c as n,a as t,h as d,t as s,d as p,w as H,b as g,n as m,m as I,D as M,e as J,F as K,j as Q}from"./app.0acefc16.js";import"./Dropdown.f0c425fc.js";import"./FlashMessages.62b7b8d9.js";const W={layout:z,components:{LoadingButton:Y},props:{icustomers:Array,members:Array},metaInfo(){return{title:this.$tc("Report",2)}},data(){return{show:!0,errors:null,sending:!1,reportData:null,form:{user_id:null,end_date:null,start_date:null,customer_id:null,report:"General"},users:[],user:null,customers:[],customer:null}},mounted(){let e=new Date;this.users=this.members,this.customers=this.icustomers,this.form.end_date=this.$date(e),this.form.start_date=this.$date(new Date(e.getFullYear(),e.getMonth(),1))},methods:{submit(){this.sending=!0,this.$axios.post(this.route("reports.get"),this.form).then(e=>{this.show=!1,this.reportData=e.data,this.errors=null}).catch(e=>this.errors=e.response.data.errors).finally(()=>this.sending=!1)},customerChanged(e){this.customer=e||null,this.form.customer_id=e?e.value:null},searchCustomers(e,l){e&&(l(!0),this.searchingCustomers(l,e,this))},searchingCustomers:F((e,l,u)=>{fetch(u.route("ajax.customers")+"?search="+escape(l)).then(b=>{b.json().then(r=>u.customers=r),e(!1)})},350),userChanged(e){this.user=e||null,this.form.user_id=e?e.value:null},searchUsers(e,l){e&&(l(!0),this.searchingUsers(l,e,this))},searchingUsers:F((e,l,u)=>{fetch(u.route("ajax.users")+"?search="+escape(l)).then(b=>{b.json().then(r=>u.users=r),e(!1)})},350)}},X={key:0,class:"np"},Z={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},ee={class:"bg-white rounded shadow overflow-hidden max-w-3xl"},re={class:"px-8 py-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},te={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},se={class:"form-label",for:"report"},oe={key:0,class:"form-error"},ne={key:1,class:"form-error"},le={key:0,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},de={class:"form-label",for:"customer_id"},ie={key:0,class:"form-error"},pe={key:1,class:"form-error"},ue={key:1,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ae={class:"form-label",for:"user_id"},me={key:0,class:"form-error"},be={key:1,class:"form-error"},ge={key:2,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},he={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},ce={class:"form-label",for:"start_date"},fe=["placeholder"],_e={key:0,class:"form-error"},ye={key:1,class:"form-error"},ve={class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},we={class:"form-label",for:"end_date"},De=["placeholder"],je={key:0,class:"form-error"},ke={key:1,class:"form-error"},Ce={class:"px-8 py-4 bg-gray-100 border-t border-gray-200 flex justify-end items-center"},Te={key:1,class:"bg-white rounded shadow overflow-hidden max-w-4xl p-4"},$e={class:"flex items-start justify-between"},Ue={class:"mb-2 font-bold text-lg md:text-2xl"},Ae={class:"mb-6 mt-2 font-bold"},Se={class:"mb-4 flex items-center justify-between p-4 bg-gray-200 rounded"},Ve={key:0},Oe={class:"mb-4 flex items-center justify-between p-4 bg-green-100 rounded text-lg border border-green-300"},Re={class:"mb-4 flex items-center justify-between p-4 bg-orange-100 rounded text-lg border border-orange-300"},Ee={class:"mb-4 flex items-center justify-between p-4 bg-red-100 rounded text-lg border border-red-300"},Ne={class:"mb-4 flex items-center justify-between p-4 bg-yellow-100 rounded text-lg border border-yellow-300"},Be={class:"mb-4 flex items-center justify-between p-4 bg-gray-700 rounded text-lg border border-gray-800 text-white fill-white"},Le={key:1},Fe={class:"mb-4 flex items-center justify-between p-4 bg-purple-100 rounded text-lg border border-purple-300"},Ge={class:"mb-4 flex items-center justify-between p-4 bg-indigo-100 rounded text-lg border border-indigo-300"},Ie={class:"mb-4 flex items-center justify-between p-4 bg-green-100 rounded text-lg border border-green-300"},Me={class:"mb-4 flex items-center justify-between p-4 bg-orange-100 rounded text-lg border border-orange-300"},Pe={class:"mb-4 flex items-center justify-between p-4 bg-blue-100 rounded text-lg border border-blue-300"},qe={key:2},ze={class:"mb-4 flex items-center justify-between p-4 bg-purple-100 rounded text-lg border border-purple-300"},Ye={class:"mb-4 p-4 bg-indigo-100 rounded text-lg border border-indigo-300"},xe={class:"flex items-center justify-between"},He={class:"mt-2 flex items-center justify-between"},Je={class:"mb-4 p-4 bg-green-100 rounded text-lg border border-green-300"},Ke={class:"flex items-center justify-between"},Qe={class:"mt-2 flex items-center justify-between"},We={class:"mb-4 flex items-center justify-between p-4 bg-orange-100 rounded text-lg border border-orange-300"},Xe={class:"mb-4 flex items-center justify-between p-4 bg-blue-100 rounded text-lg border border-blue-300"},Ze={key:3},er={class:"mb-4 p-4 bg-indigo-100 rounded text-lg border border-indigo-300"},rr={class:"flex items-center justify-between"},tr={class:"mt-2 flex items-center justify-between"},sr={key:0,class:"px-4 pt-2 pb-4 bg-orange-100 rounded text-lg border border-orange-300"};function or(e,l,u,b,r,a){var c,f,_,y,v,w,D,j,k,C,T,$,U,A,S,V,O,R,E,N,B,L;const h=G("v-select"),P=G("loading-button");return o(),n("div",null,[r.show?(o(),n("div",X,[t("h1",Z,[d(s(e.$tc("Report",2))+" ",1),r.reportData?(o(),n("button",{key:0,type:"button",onClick:l[0]||(l[0]=i=>r.show=!1),class:"text-sm px-3 py-2 rounded bg-gray-200 hover:bg-gray-400 ml-3"},s(e.$t("show_x",{x:e.$tc("Report")})),1)):p("",!0)]),t("div",ee,[t("form",{onSubmit:l[5]||(l[5]=H((...i)=>a.submit&&a.submit(...i),["prevent"])),autocomplete:"off"},[t("div",re,[t("div",te,[t("label",se,s(e.$tc("Report")),1),g(h,{transition:"","input-id":"report",clearable:!1,filterable:!1,modelValue:r.form.report,"onUpdate:modelValue":l[1]||(l[1]=i=>r.form.report=i),dir:e.$page.props.user.account.direction,placeholder:e.$t("select_x",{x:e.$tc("Report")}),options:[e.$t("General"),e.$tc("Customer"),e.$tc("Tax"),e.$tc("User")],class:m({error:((c=e.$page.props.errors)==null?void 0:c.report)&&((f=e.$page.props.errors)==null?void 0:f.report.length)||r.errors&&r.errors.report})},null,8,["modelValue","dir","placeholder","options","class"]),r.errors&&r.errors.report?(o(),n("div",oe,s(r.errors.report[0]),1)):p("",!0),(_=e.$page.props.errors)!=null&&_.report?(o(),n("div",ne,s((y=e.$page.props.errors)==null?void 0:y.report[0]),1)):p("",!0)]),r.form.report=="Customer"?(o(),n("div",le,[t("label",de,s(e.$tc("Customer")),1),g(h,{transition:"",value:r.customer,options:r.customers,"input-id":"customer_id",onSearch:a.searchCustomers,modelValue:r.form.customer_id,"onUpdate:modelValue":l[2]||(l[2]=i=>r.form.customer_id=i),reduce:i=>i.value,dir:e.$page.props.user.account.direction,placeholder:e.$t("search_x",{x:e.$tc("Customer",2)}),class:m({error:((v=e.$page.props.errors)==null?void 0:v.customer_id)&&((w=e.$page.props.errors)==null?void 0:w.customer_id.length)||r.errors&&r.errors.customer_id})},null,8,["value","options","onSearch","modelValue","reduce","dir","placeholder","class"]),r.errors&&r.errors.customer_id?(o(),n("div",ie,s(r.errors.customer_id[0]),1)):p("",!0),(D=e.$page.props.errors)!=null&&D.customer_id?(o(),n("div",pe,s((j=e.$page.props.errors)==null?void 0:j.customer_id[0]),1)):p("",!0)])):r.form.report=="User"?(o(),n("div",ue,[t("label",ae,s(e.$tc("User")),1),g(h,{dir:e.$page.props.user.account.direction,transition:"",value:r.user,options:r.users,"input-id":"user_id",onInput:a.userChanged,onSearch:a.searchUsers,"onOption:selected":a.userChanged,placeholder:e.$t("search_x",{x:e.$tc("User",2)}),class:m({error:((k=e.$page.props.errors)==null?void 0:k.user_id)&&((C=e.$page.props.errors)==null?void 0:C.user_id.length)||r.errors&&r.errors.user_id})},null,8,["dir","value","options","onInput","onSearch","onOption:selected","placeholder","class"]),r.errors&&r.errors.user_id?(o(),n("div",me,s(r.errors.user_id[0]),1)):p("",!0),(T=e.$page.props.errors)!=null&&T.user_id?(o(),n("div",be,s(($=e.$page.props.errors)==null?void 0:$.user_id[0]),1)):p("",!0)])):(o(),n("div",ge)),t("div",he,[t("label",ce,s(e.$t("Start Date")),1),I(t("input",{type:"date",id:"start_date",class:m(["form-input",{error:((U=e.$page.props.errors)==null?void 0:U.start_date)&&((A=e.$page.props.errors)==null?void 0:A.start_date.length)||r.errors&&r.errors.start_date}]),"onUpdate:modelValue":l[3]||(l[3]=i=>r.form.start_date=i),pattern:"\\d{4}-\\d{2}-\\d{2}",placeholder:e.$t("Start Date")},null,10,fe),[[M,r.form.start_date]]),t("div",null,[r.errors&&r.errors.start_date?(o(),n("div",_e,s(r.errors.start_date[0]),1)):p("",!0),((S=e.$page.props.errors)==null?void 0:S.start_date)&&((V=e.$page.props.errors)==null?void 0:V.start_date.length)?(o(),n("div",ye,s((O=e.$page.props.errors)==null?void 0:O.start_date[0]),1)):p("",!0)])]),t("div",ve,[t("label",we,s(e.$t("End Date")),1),I(t("input",{type:"date",id:"end_date",class:m(["form-input",{error:((R=e.$page.props.errors)==null?void 0:R.end_date)&&((E=e.$page.props.errors)==null?void 0:E.end_date.length)||r.errors&&r.errors.end_date}]),"onUpdate:modelValue":l[4]||(l[4]=i=>r.form.end_date=i),pattern:"\\d{4}-\\d{2}-\\d{2}",placeholder:e.$t("End Date")},null,10,De),[[M,r.form.end_date]]),t("div",null,[r.errors&&r.errors.end_date?(o(),n("div",je,s(r.errors.end_date[0]),1)):p("",!0),((N=e.$page.props.errors)==null?void 0:N.end_date)&&((B=e.$page.props.errors)==null?void 0:B.end_date.length)?(o(),n("div",ke,s((L=e.$page.props.errors)==null?void 0:L.end_date[0]),1)):p("",!0)])])]),t("div",Ce,[g(P,{loading:r.sending,class:"btn-gray",type:"submit"},{default:J(()=>[d(s(e.$t("Get Report")),1)]),_:1},8,["loading"])])],32)])])):(o(),n("div",Te,[t("div",$e,[t("div",null,[t("h1",Ue,s(r.reportData.title),1),t("h1",Ae,s(r.reportData.heading),1)]),r.reportData?(o(),n("button",{key:0,type:"button",onClick:l[6]||(l[6]=i=>r.show=!0),class:"np btn-gray"},s(e.$t("Show Form")),1)):p("",!0)]),t("div",Se,[t("div",null,s(e.$t("Start Date"))+": "+s(e.$datetime(r.reportData.start_date)),1),t("div",null,s(e.$t("End Date"))+": "+s(e.$datetime(r.reportData.end_date)),1)]),r.form.report=="General"?(o(),n("div",Ve,[t("div",Oe,[d(s(e.$t("Order Amount"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_amount)),1)]),t("div",Re,[d(s(e.$t("Tax Amount"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_tax)),1)]),t("div",Ee,[d(s(e.$tc("Expense",2))+": ",1),t("strong",null,s(e.$number(r.reportData.report.expenses.total)),1)]),t("div",Ne,[d(s(e.$tc("Salary",2))+": ",1),t("strong",null,s(e.$number(r.reportData.report.salaries.total)),1)]),t("div",Be,[d(s(e.$t("Outcome"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_amount-r.reportData.report.orders.total_tax-r.reportData.report.expenses.total-r.reportData.report.salaries.total)),1)])])):r.form.report=="Customer"?(o(),n("div",Le,[t("div",Fe,[t("span",null,[d(s(e.$t("Name"))+": ",1),t("strong",null,s(r.reportData.report.customer.name),1)]),t("span",null,[d(s(e.$t("Phone"))+": ",1),t("strong",null,s(r.reportData.report.customer.phone),1)])]),t("div",Ge,[d(s(e.$t("Total Orders"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_orders,0)),1)]),t("div",Ie,[d(s(e.$t("Total Order Amount"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_amount)),1)]),t("div",Me,[d(s(e.$t("Due Payment Requests"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.due_payments,0)),1)]),t("div",Pe,[d(s(e.$t("Balance"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.balance)),1)])])):r.form.report=="User"?(o(),n("div",qe,[t("div",ze,[t("span",null,[d(s(e.$t("Name"))+": ",1),t("strong",null,s(r.reportData.report.user.name),1)]),t("span",null,[d(s(e.$t("Phone"))+": ",1),t("strong",null,s(r.reportData.report.user.phone),1)])]),t("div",Ye,[t("div",xe,[d(s(e.$t("Total Orders"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_orders,0)),1)]),t("div",He,[d(s(e.$t("Total Order Amount"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_amount)),1)])]),t("div",Je,[t("div",Ke,[d(s(e.$t("Total Orders Assigned"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.assigned_orders.total_orders,0)),1)]),t("div",Qe,[d(s(e.$t("Total Assigned Order Amount"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.assigned_orders.total_amount)),1)])]),t("div",We,[d(s(e.$t("Added Expenses"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.expenses)),1)]),t("div",Xe,[d(s(e.$tc("Salary",2))+": ",1),t("strong",null,s(e.$number(r.reportData.report.salaries)),1)])])):r.form.report=="Tax"?(o(),n("div",Ze,[t("div",er,[t("div",rr,[d(s(e.$t("Total Order Amount"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_amount)),1)]),t("div",tr,[d(s(e.$t("Total Tax Amount"))+": ",1),t("strong",null,s(e.$number(r.reportData.report.orders.total_tax)),1)])]),r.reportData.report.orders.taxes&&r.reportData.report.orders.taxes.length?(o(),n("div",sr,[(o(!0),n(K,null,Q(r.reportData.report.orders.taxes,(i,q)=>(o(),n("div",{key:"tax_"+q,class:"mt-2 flex items-center justify-between"},[d(s(i.name)+" ("+s(i.code)+"): ",1),t("strong",null,s(e.$number(i.total)),1)]))),128))])):p("",!0)])):p("",!0)]))])}const ar=x(W,[["render",or]]);export{ar as default};
