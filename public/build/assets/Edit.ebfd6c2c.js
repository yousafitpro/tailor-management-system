import{L as M}from"./Layout.cd4957e3.js";import{T as N}from"./TextInput.9b0b3eea.js";import{d as T}from"./DeleteMixin.5d42e9e1.js";import{S as D}from"./SelectInput.4008e17a.js";import{L as S}from"./LoadingButton.df0f61cd.js";import{T as B}from"./TrashedMessage.904093cf.js";import{D as E}from"./DeleteRestoreComponent.8fa0eedf.js";import{_ as I,r as d,o as i,c as u,a as t,b as a,e as g,h,t as l,f as V,d as b,w as R,F as U,j}from"./app.576bfb6d.js";import"./Dropdown.33fb11be.js";import"./FlashMessages.f9709e01.js";import"./InputError.ce2fc15d.js";import"./Dialog.e26fd9fa.js";import"./Modal.df3141f0.js";const F={layout:M,remember:"form",props:{customer:Object},mixins:[T("customer")],components:{TextInput:N,SelectInput:D,LoadingButton:S,TrashedMessage:B,DeleteRestoreComponent:E},metaInfo(){return{title:this.$t("edit_x",{x:this.form.name})}},data(){return{restore:!1,sending:!1,form:{name:this.customer.name,email:this.customer.email,phone:this.customer.phone,address:this.customer.address,description:this.customer.description}}},methods:{rowClicked(e){this.$inertia.visit(this.route("measurements.edit",e))},submit(){this.sending=!0,this.$inertia.put(this.route("customers.update",this.customer.id),this.form,{onFinish:()=>this.sending=!1})},displayExtra(e){let s="";return Array.isArray(e)&&e.map((m,C)=>{for(let[o,n]of Object.entries(m))if(n.includes("{")&&n.includes("}")&&n.includes(":")){s+=`<span class="inline-block"><strong>${o}</strong>: `;const p=JSON.parse(n);for(let[f,_]of Object.entries(p))_?s+=`<span class="inline-block text-green-600 ltr:mr-2 rtl:ml-2">&#10003; ${f},</span> `:s+=`<span class="inline-block text-red-500 ltr:mr-2 rtl:ml-2">&#10005; ${f},</span> `;s+="</span>"}else s+=`<span class="inline-block"><strong>${o}</strong>: ${n},</span> `}),s}}},O={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},A=t("span",{class:"text-gray-400 font-medium mx-2"},"/",-1),H={class:"bg-white rounded shadow overflow-hidden max-w-3xl"},J={class:"p-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},P={class:"px-8 pb-8 ltr:-mr-6 rtl:-ml-6 ltr:ml-0 rtl:mr-0 -mb-8 flex flex-wrap"},q={class:"np px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center"},z={class:"mt-12 font-bold text-2xl"},G={class:"mt-6 bg-white rounded shadow overflow-x-auto scroll-on-light"},K={class:"w-full whitespace-no-wrap"},Q={class:"text-left font-bold"},W={class:"px-6 pt-6 pb-4"},X={class:"px-6 pt-6 pb-4"},Y={class:"px-6 pt-6 pb-4"},Z={class:"px-6 pt-6 pb-4",colspan:"2"},ee=["onClick"],te={class:"border-t px-6 py-4"},se={class:"flex items-center"},re={class:"border-t px-6 py-4"},oe={key:0},le={class:"border-t px-6 py-4 w-56 max-w-sm",style:{"min-width":"250px"}},ne=["innerHTML"],ae={class:"border-t px-6 py-4"},ie={class:"border-t px-6 py-4 w-8"},me={key:0},de={class:"border-t px-6 py-4",colspan:"5"};function pe(e,s,m,C,o,n){var w,x,y,k,v;const p=d("Icons"),f=d("Link"),_=d("trashed-message"),c=d("text-input"),$=d("DeleteRestoreComponent"),L=d("loading-button");return i(),u("div",null,[t("h1",O,[a(f,{class:"text-gray-600 hover:text-gray-800 inline-flex items-center",href:e.route("customers")},{default:g(()=>[a(p,{name:"back",class:"flex-shrink-0 w-3 h-3 md:w-5 md:h-5 fill-current ltr:mr-2 rtl:ml-2 rtl:rotate"}),h(" "+l(e.$tc("Customer",2)),1)]),_:1},8,["href"]),A,h(" "+l(o.form.name),1)]),m.customer.deleted_at?(i(),V(_,{key:0,class:"mb-6",onRestore:s[0]||(s[0]=()=>o.restore=!0)},{default:g(()=>[t("span",null,l(e.$t("already_deleted_x",{x:e.$tc("Customer")})),1)]),_:1})):b("",!0),t("div",H,[t("form",{onSubmit:s[7]||(s[7]=R((...r)=>n.submit&&n.submit(...r),["prevent"])),autocomplete:"off"},[t("div",J,[a(c,{modelValue:o.form.name,"onUpdate:modelValue":s[1]||(s[1]=r=>o.form.name=r),errors:(w=e.$page.props.errors)==null?void 0:w.name,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2",label:e.$t("Name")},null,8,["modelValue","errors","label"]),a(c,{label:e.$t("Phone"),modelValue:o.form.phone,"onUpdate:modelValue":s[2]||(s[2]=r=>o.form.phone=r),errors:(x=e.$page.props.errors)==null?void 0:x.phone,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["label","modelValue","errors"]),a(c,{label:e.$t("Email"),modelValue:o.form.email,"onUpdate:modelValue":s[3]||(s[3]=r=>o.form.email=r),errors:(y=e.$page.props.errors)==null?void 0:y.email,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["label","modelValue","errors"]),a(c,{label:e.$t("Address"),modelValue:o.form.address,"onUpdate:modelValue":s[4]||(s[4]=r=>o.form.address=r),errors:(k=e.$page.props.errors)==null?void 0:k.address,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full lg:w-1/2"},null,8,["label","modelValue","errors"])]),t("div",P,[a(c,{label:e.$t("Description"),modelValue:o.form.description,"onUpdate:modelValue":s[5]||(s[5]=r=>o.form.description=r),errors:(v=e.$page.props.errors)==null?void 0:v.description,class:"ltr:pr-6 rtl:pl-6 pb-8 w-full"},null,8,["label","modelValue","errors"])]),t("div",q,[a($,{restore:o.restore,data:m.customer,model:"Customer",routeM:"customers",onCloseRestore:s[6]||(s[6]=()=>o.restore=!1)},null,8,["restore","data"]),a(L,{loading:o.sending,class:"btn-gray ltr:ml-auto rtl:mr-auto",type:"submit"},{default:g(()=>[h(l(e.$t("update_x",{x:e.$tc("Customer")})),1)]),_:1},8,["loading"])])],32)]),t("h2",z,l(e.$tc("Measurement",2)),1),t("div",G,[t("table",K,[t("tr",Q,[t("th",W,l(e.$t("Name")),1),t("th",X,l(e.$tc("Service")),1),t("th",Y,l(e.$tc("Field",2)),1),t("th",Z,l(e.$tc("Measurement")),1)]),(i(!0),u(U,null,j(m.customer.measurements,r=>(i(),u("tr",{key:r.id,onClick:ce=>n.rowClicked(r.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[t("td",te,[t("div",se,[h(l(r.name)+" ",1),r.deleted_at?(i(),V(p,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):b("",!0)])]),t("td",re,[r.service?(i(),u("div",oe,l(r.service.name),1)):b("",!0)]),t("td",le,[t("span",{class:"whitespace-normal",innerHTML:n.displayExtra(r.extra_attributes)},null,8,ne)]),t("td",ae,l(r.measurement),1),t("td",ie,[a(p,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,ee))),128)),m.customer.measurements.length===0?(i(),u("tr",me,[t("td",de,l(e.$t("no_x_found",{x:e.$tc("Measurement")})),1)])):b("",!0)])])])}const $e=I(F,[["render",pe]]);export{$e as default};
