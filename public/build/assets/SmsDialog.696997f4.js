import{L as b}from"./LoadingButton.b23816ca.js";import{T as x}from"./TextareaInput.2286e672.js";import{_ as f,r as m,o as s,c as o,a as n,t as r,d as i,b as h,e as y,h as k}from"./app.beedf8fa.js";const v={components:{TextareaInput:x,LoadingButton:b},props:{order:Object},data(){return{data:null,text:null,sending:!1,sent:!1,errors:{},error:null}},methods:{send(){this.errors={},this.error=null,this.sending=!0,this.sending=!0,this.$axios.post(this.route("customers.sms",this.order.customer.id),{text:this.text}).then(e=>{this.sending=!1,this.sent=e.data.success,e.data.success?this.$emit("close"):this.error=e.data.error}).catch(e=>{this.sending=!1,console.log(e.response),this.errors=e.response.data.errors})}}},S={key:0,class:"w-full -my-6"},C={class:"w-full bg-white rounded shadow-lg leading-normal p-4"},V={class:"font-bold"},w=["innerHTML"],T={key:0,class:"text-green-500 mb-4"},M={key:1},B={key:0,class:"text-red-500 mb-4"},L={key:1,class:"text-red-500 mb-4"},N={class:"-m-4 px-8 py-4 bg-gray-100 border-t border-gray-200 flex items-center rounded-b"},j={key:0,class:"btn-spinner ltr:mr-2 rtl:ml-2"};function D(e,l,a,H,t,p){var d,c;const _=m("textarea-input"),g=m("loading-button");return a.order?(s(),o("div",S,[n("div",C,[n("h4",V,r(e.$t("Send SMS to Customer")),1),n("h4",{class:"text-sm mt-2 mb-4",innerHTML:e.$t("sending_to_html",{name:a.order.customer.name,phone:a.order.customer.phone})},null,8,w),t.sent?(s(),o("div",T,r(e.$t("SMS has been successfully sent to customer.")),1)):(s(),o("div",M,[t.error?(s(),o("div",B,r(t.error),1)):i("",!0),(d=t.errors)!=null&&d.text?(s(),o("div",L,r(t.errors.text.join(", ")),1)):i("",!0)])),h(_,{modelValue:t.text,"onUpdate:modelValue":l[0]||(l[0]=u=>t.text=u),resize:!1,errors:(c=t.errors)==null?void 0:c.text,class:"pb-10 w-full",label:"SMS Text"},null,8,["modelValue","errors"]),n("div",N,[n("button",{class:"text-gray-700 hover:text-gray-800",type:"button",onClick:l[1]||(l[1]=u=>e.$emit("close"))},r(e.$t("Cancel")),1),h(g,{type:"button",onClick:p.send,loading:t.sending,class:"btn-gray px-4 py-2 ml-auto flex items-center"},{default:y(()=>[t.sending?(s(),o("div",j)):i("",!0),k(" "+r(e.$t("Send")),1)]),_:1},8,["onClick","loading"])])])])):i("",!0)}const O=f(v,[["render",D]]);export{O as S};
